<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--! docentry="Ravl.Installation" -->
<html>
  <head>
    <title>RAVL Installation instructions</title>
  </head>

  <body>

    <p> This document provides a guideline for installation, but has not been
    tested thoroughly.  The instructions are for a Linux environment.  However
    RAVL should also compile under M$ Windows, provided that a compiler is
    used that is broadly ANSI compatible.</p>


    <h2>Compiler installation</h2>

    <p> The RAVL library requires the use of the gcc compiler, version 4.0.2
    or later. If it is not on the system, install it first. You may need to be
    logged in as root for this.  After downloading from the <a
    href="http://gcc.gnu.org/releases.html">Gnu site</a>, the installation
    might be something like: </p>

    <pre>
bunzip2 gcc-4.0.2.tar.bz2
tar -xvf gcc-4.0.2.tar
mv gcc-4.0.2 gcc-4.0.2-src
cd gcc-4.0.2-src/
./configure --prefix=/usr/bin/gcc-4.0.2 --enable-languages=c,c++
make bootstrap
setenv LD_LIBRARY_PATH /vol/gcc/lib:/vol/ai/lib:${LD_LIBRARY_PATH}
make install
cd ..
</pre>

    <h2>Installing the RAVL library and applications</h2> 

    <p>Currently we recommend that you <i>don't</i> log in as root for this
    installation.  Decide on a place for the installation and define the
    environment variable <code>RAVL_INSTALLATION</code> accordingly.  The RAVL
    library and executables can then be installed as follows (selecting the
    relevant <code>config.local.xxx</code> file if not a standard Linux 32-bit
    installation):</p>

    <pre>
mkdir -p $RAVL_INSTALLATION
cd $RAVL_INSTALLATION
svn co https://svn.sourceforge.net/svnroot/ravl/main/Ravl
cp Ravl/QMake/config.local.linux .</pre>

    <p>Then edit the chosen <code>config.local.xxx</code>.  Typical modifications include:  </p>
    <ul>
      <li> picking up the correct compiler if a new one has been
      installed</li> 

      <li> adjusting the available resources.  The packages in the
      Ravl/Contrib directory all depend on external libraries.  Different
      operating systems have different sets of these libraries.  The
      corresponding Ravl packages can be individually disabled by commenting
      out the relevant <code>RESOURCES</code>.  To find out which this
      relevant line is:
        <ul> <li>In the <code>defs.mk</code> file in the
            <code>Contrib</code> package directory, find the value of the
            <code>REQUIRES</code> variable</li>
        </ul>
      </li>
     </ul> 

    <p>The following is the result of applying <code>diff</code> to a (rather
    old) example of the edited and unedited versions of
    <code>$RAVL_INSTALLATION/config.local.xxx</code>.  In this example, extra
    packages were installed in <code>/vol/ai</code>. </p>

    <pre>
15a16,17
> RAVL_CC = /usr/bin/gcc-4.0.2/bin/gcc
> RAVL_CXX = /usr/bin/gcc-4.0.2/bin/g++
22a25,26
> EXTRA_LDFLAGS = -Wl,-rpath,/usr/bin/gcc-4.0.2/lib/
>
49c53
< RESOURCES += libAudioFile
---
> #RESOURCES += libAudioFile
53,54c57,58
< #RESOURCES += libDV
< #LIBDV_HOME=
---
> RESOURCES += libDV
> LIBDV_HOME=/vol/ai

58,59c62,63
< #RESOURCES += libavc1394
< #LIBAVC1394_HOME=
---
> RESOURCES += libavc1394
> LIBAVC1394_HOME=/vol/ai
73,76d76
< ## libGuppi ################################################
<
< RESOURCES += libGuppi
<
79,80c79
< RESOURCES += devVideo4Linux
<
---
> #RESOURCES += devVideo4Linux
</pre>

    <p>Finally, the installation is:</p>

    <pre>
cd $RAVL_INSTALLATION/Ravl
./install $RAVL_INSTALLATION/RavlProject auto $RAVL_INSTALLATION/config.local.linux; rehash</pre> 
    
    <p>Use the following alias and variable settings for
    compilation:</p>

    <pre>
setenv PROJECT_OUT ~/ProjOut
alias qm 'make -f $RAVL_INSTALLATION/RavlProject/share/RAVL/QMake/QMake.mk USERBUILD=1'
set path = ($path $PROJECT_OUT/lib/RAVL/linux/bin)
setenv LD_LIBRARY_PATH /vol/ai/lib</pre>

    <ul>
      <li>$PROJECT_OUT controls the directory into which your own code
    will be compiled.</li>
      <li>qm is the alias for building your own code.</li>
      <li><code>/vol/ai</code> is the
    directory in which extra packages were installed in the above example
    (and may therefore be superfluous).</li>
    </ul>

    <p>Locally-built documentation for the RAVL classes can then be found at:
      <nobr><code>$RAVL_INSTALLATION/RavlProject/share/doc/RAVL/Auto/Basic/Tree/Ravl.html</code></nobr></p>

    <hr>
    <address><a href="mailto:w.christmas@surrey.ac.uk">Bill Christmas</a></address>
<!-- Created: Fri Dec 23 09:31:09 GMT 2005 -->
<!-- hhmts start -->
Last modified: Mon Jun 19 15:59:07 BST 2006
<!-- hhmts end -->
  </body>
</html>
