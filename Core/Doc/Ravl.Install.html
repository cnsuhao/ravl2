<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--! docentry="Ravl.Installation" -->
<html>
  <head>
    <title>RAVL Installation instructions</title>
  </head>

  <body>

    <p> These instructions are for a Linux environment, mostly assuming use of
    a C shell.  There are also instructions for compiling RAVL under <a
    href="Ravl.Installation.Windows.html">M$ Windows</a>.</p>

    <p> The installation process by default will build several versions of the
    library, including varying degrees of optimisation and debug information,
    and also including shared and static versions of the libraries.</p>

    <p> The instructions are for downloading the current version on the
    SourceForge SVN repository.  If you prefer, you can download the <a
    href="http://sourceforge.net/projects/ravl">latest release</a> (select
    "Download"). </p>

    <h2>RAVL Prerequisites</h2>

    <p> The RAVL library requires the use of the gcc compiler, version 4.0.2
    or later. If it is not on the system, <a
    href="Ravl.Installation.Compiler.html">install it first</a>.</p>

    <p>The <a href="Ravl.Installation.Contrib.html">gtk 2.0 library</a> is
    strongly recommended.  Much of RAVL will not build if gtk is not
    installed.</p>

    
    <h2>Installing the RAVL library and applications</h2> 

    <p> Currently we recommend that you <i>don't</i> log in as root for this
    installation.  Installation of the RAVL library and executables is rather
    non-standard, but seems to work for most people:</p>

    <ol>
      <li>  Decide on a place for the installation and define the
    environment variable <code>RAVL_INSTALLATION</code> accordingly, e.g. for C shell:

        <pre>
setenv RAVL_INSTALLATION ~/src
mkdir -p $RAVL_INSTALLATION
cd $RAVL_INSTALLATION</pre>

        <p>or for bash shell:</p>

        <pre>
export RAVL_INSTALLATION=~/src
etc.</pre>
      </li>

      <li>Download the source code:
    <pre>
svn co https://ravl.svn.sourceforge.net/svnroot/ravl/main/Ravl</pre>
      </li>

      <li> Select the relevant <code>config.local</code> file from
      <code>$RAVL_INSTALLATION/Ravl/QMake</code> as follows.  Determine the
      correct suffix for the file by running:
<pre>
$RAVL_INSTALLATION/Ravl/QMake/config.arc</pre> 

      If this script generates an error message you will need to hack it.
      Sorry.  For a standard Linux installation on a 32-bit machine the config
      file is usually <code>config.local.linux</code>, or
      <code>config.local.linux64</code> for a 64-bit machine.  In what follows
      it is referred to as <code>config.local.xxx</code>.  Then:
    <pre>
cp Ravl/QMake/config.local.xxx .</pre></li>

      <li>  Then edit the chosen copied <code>config.local.xxx</code>.
    Typical modifications include:
        <ul>
          <li> turning off some of the library versions via the
          <code>FULLBUILD_TARGETS</code> variable (especially if space is
          limited - a full install currently uses about 2Gbyte):
            <ul>
          
              <li><code>debug</code> - includes debugging information and array
                bound checking</li>
              
              <li><code>check</code> - includes array bound checking</li>
              
              <li><code>opt</code> - generates optimised code with no array
              bound checking</li>
              
              <li><code>debugshared, checkshared, optshared</code> - builds
              shared versions of the above.  These link faster </li>
              
              <li><code>optbin</code> - builds application binaries -
              including <code>CxxDoc</code>, the program that builds this
              documentation.  So if you turn <code>optbin</code> off, you need
              to build <code>CxxDoc</code> separately to get a complete
              installation.</li>
            </ul>
          </li>
          <li> picking up the correct compiler if a new one has been installed, or
            incorporating <code>ccache</code></li>
          
          <li> adjusting the available resources using the
          <code>RESOURCES</code> variable.  The packages in the <code><a
          href="Ravl.Installation.Contrib.html">Ravl/Contrib</a></code>
          directory all depend on various external libraries; different
          operating systems have different sets of these libraries.  Most of
          them are turned off by default.  It is probably best to leave them
          turned off when first installing RAVL.  Also if your system doesn't
          have for example <code>gtk</code>, needed by the RAVL
          <code>GUI</code> module, that needs turning off. </li>

          
        </ul> 

        Here is an <a href="Ravl.Installation.Config.html">example</a> of some
        edits from an actual installation.</li>
      
      
      <li>Finally, the installation is:

        <pre>
cd $RAVL_INSTALLATION/Ravl
./install $RAVL_INSTALLATION/RavlProject auto $RAVL_INSTALLATION/config.local.xxx
rehash</pre> 
    (<code>rehash</code> is only necessary if using a C-shell.)
      </li>
    </ol>
    
    <h3>Troubleshooting</h3>

    <p>If the install fails (usually because libraries that are required in  <code>config.local.xxx</code> are not actually installed), after fixing the problem it is usually sufficient to simply re-run the <code>./install ...</code> command.  However, if this leads to further compilation errors, you should remove these two directory trees before reinstalling:</p>
    <pre>
$RAVL_INSTALLATION/RavlProject
/tmp/$USER/qm
</pre>

    <h2> Usage </h2><a name="USAGE"></a>

    <p>Put the following alias and variable settings for compilation (modified
    if appropriate) in your <code>.cshrc</code> file:</p>

    <pre>
setenv RAVL_INSTALLATION ~/src
setenv PROJECT_OUT ~/ProjOut
alias qm 'make -f $RAVL_INSTALLATION/RavlProject/share/RAVL/QMake/QMake.mk USERBUILD=1'
setenv PATH  $PATH:$PROJECT_OUT/lib/RAVL/linux/bin:$RAVL_INSTALLATION/RavlProject/bin
</pre>
    <p>(Bash shell users will need to modify these commands appropriately and
    add them to the <code>.bashrc</code> file instead.)</p>
    <ul>
      <li>RAVL_INSTALLATION <i>must</i> be set to the same as for the
      installation above.</li>

      <li>$PROJECT_OUT controls the directory into which your own code will be
      compiled.</li>

      <li>qm is the alias for building your own code.  Type <code>qm
      help</code> for options for qm.</li>

      <li>The additions to $PATH will include your own executables built using qm, as well as some RAVL utilities.</li>
    </ul>

    <p>Locally-built documentation for the RAVL classes can then be found at:
      <nobr><code>$RAVL_INSTALLATION/RavlProject/share/doc/RAVL/Auto/Basic/Tree/Ravl.html</code></nobr></p>

    <h2> See also </h2>

    <p> See also the README file in the distribution.</p>


    <hr>
    <address><a href="mailto:w.christmas@surrey.ac.uk">Bill Christmas</a></address>
<!-- Created: Fri Dec 23 09:31:09 GMT 2005 -->
<!-- hhmts start -->
Last modified: Wed Aug  1 18:25:25 BST 2007
<!-- hhmts end -->
  </body>
</html>
