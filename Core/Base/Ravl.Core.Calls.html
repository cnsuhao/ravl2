<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Calls and Triggers</title>
  </head>

  <body>
    <p>These functions and classes provide a flexible method for handling
    function and method pointers, while simplifying the syntax. They have many
    of the advantages of using <a href="Ravl.OS.Signals.html">Signals</a> in
    that you don't have to know the exact form of a function pointer, but
    without the complexity.  The rough breakdown of the following classes and
    functions is as follows.</p>
    <ul>
      <li>The <code>Call...</code> classes provide the basic mechanism.</li> 

      <li> The <code>Trigger()</code> functions are "helper" functions to make
      it simple to create Trigger and Call objects.  The argument types to
      these functions seems obscure, but in practice they are designed so that
      you can use more or less any argument: const or no-const, by name or by
      reference, etc.</li>

      <li> The <code>TriggerC</code> class is the parent class for all of the
      Call classes: it is useful if you don't need arguments or return values
      at the point of invoking the call.</li> 
    </ul> 

    <h3>Using triggers </h3>
    
    Triggers are the simplest form of call. They allow a function
    with an arbitrary set of parameters to be called on an event. It is
    used for example in classes such as 
    <a href="../Class/RavlN.TimedTriggerQueueC.html">TimedTriggerQueueC</a>
    to call a method after a fixed delay, and in 
    <a href="../Class/RavlN.TickerTrigger.html">TickerTriggerC</a> which
    calls a method repeatedly at a fixed frequency.
    <p>
      Creating a trigger is simple:
<pre>
#include "Ravl/Trigger.hh"

TriggerC myTrigger;
</pre>
    
    You can assign a function to it using the <b>Trigger</b> call.

<pre>
bool PrintNumber(int &amp;i) {
  cout << "PrintNumber called with value " << i << "\n";
  return true;
}

myTrigger = Trigger(&amp;PrintNumber,2);
</pre>
    
   Calling the function can be done with the () operator.
    
<pre>
myTrigger();
</pre>

    <h3>Using calls </h3>

Calls are wrappers for C++ function pointers which allow
you to hide the difference between calling a method of a
class and a normal function, and to add default arguments
to the call that the code calling the function need not know about. <br>

<h4> Default arguments </h4>

When you setup a callback function, you can set default parameters. This
especially useful if the method you wish to call requires more information
than the callback normally provides. In the 3rd argument is set to 3, since
its only called with 2 arguments, 30 is passed as its default value.

<pre>
#include "Ravl/Calls.hh"

bool callback(int &v1,double &v2,int &x) {
  // Do something....
  return true;
}

int myprog() {

  // Declare callback variable.
  CallFunc2&lt;int,double&gt; func;  
  
  // Setup call back.
  func = Trigger(&amp;callback,10,20,30);

  // Some paramiters...  
  int v1 = 0;
  double v2 = 1.2;
  
  // Call function.
  func(v1,v2);
  
}
</pre>
  </body>
</html>
